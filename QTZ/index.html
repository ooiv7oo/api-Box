<!DOCTYPE html>
<html>
<head>
  <title>Force jump to QQ</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/animejs"></script>
  <style>
    /* 响应式设计 */
    @media (max-width: 768px) {
      /* 移动端样式 */
      body {
        font-size: 16px;
      }
    }
    @media (min-width: 769px) {
      /* PC 端样式 */
      body {
        font-size: 20px;
      }
    }
   .svg-attributes-demo {
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }
  </style>
</head>
<body>
  <h1>Welcome</h1>
  <p id="device-info">This is a tip.</p>
      <div class="svg-attributes-demo">
        <svg viewBox="0 0 128 128">
            <polygon points="64 0 119.426 32 64 64 8.574 32"></polygon>
            <filter id="turbulence">
                <feTurbulence type="fractalNoise" baseFrequency="0 0" numOctaves="1" result="noise"></feTurbulence>
                <feColorMatrix type="saturate" values="0" result="saturate"></feColorMatrix>
                <feComponentTransfer>
                    <feFuncR type="discrete" tableValues="0 1"></feFuncR>
                    <feFuncG type="discrete" tableValues="0 1"></feFuncG>
                    <feFuncB type="discrete" tableValues="0 1"></feFuncB>
                    <feFuncA type="identity" slope="1"></feFuncA>
                </feComponentTransfer>
                <feComposite operator="in" in2="SourceGraphic"></feComposite>
            </filter>
            <filter id="displacement" x="-50%" y="-50%" width="200%" height="200%">
                <feTurbulence type="fractalNoise" baseFrequency="0 0" numOctaves="1" result="noise"></feTurbulence>
                <feDisplacementMap xChannelSelector="R" yChannelSelector="G" scale="1" in="SourceGraphic"></feDisplacementMap>
            </filter>
            <polygon points="64 128 8.574 96 8.574 32 64 0 119.426 32 119.426 96" filter="url(#turbulence)"></polygon>
            <polygon points="64 128 8.574 96 8.574 32 64 0 119.426 32 119.426 96" filter="url(#displacement)"></polygon>
        </svg>
    </div>
  
  <script>
    const isMobile = 'ontouchstart' in window;
    const deviceInfo = document.getElementById('device-info');
    deviceInfo.textContent = isMobile ? 'Your current device is a mobile device, which can be called by touching it.' : 'Your current device is on the PC side and is being called.';

    function generateProfileCard() {
      const qq = new URLSearchParams(window.location.search).get('qq');
      if (!qq) {
        alert('参数不能为空！');
        return;
      }
      const url = `mqq://card/show_pslcard?src_type=internal&source=sharecard&version=1&uin=${qq}`;
      window.location.href = url;
      setTimeout(function() {
        window.opener = null;
        window.close();
      }, 600);
    }

    function retryGenerateProfileCard(maxAttempts, delay) {
      let attempts = 0;
      function tryGenerateProfileCard() {
        attempts++;
        try {
          generateProfileCard();
          console.log('Function executed successfully!');
        } catch (error) {
          console.error('Function execution failed. Attempt #' + attempts + '. Error: ' + error.message);
          if (attempts < maxAttempts) {
            console.log('Retrying in ' + delay + ' milliseconds...');
            setTimeout(tryGenerateProfileCard, delay);
          } else {
            console.error('Max number of attempts exceeded. Giving up.');
          }
        }
      }
      tryGenerateProfileCard();
    }

    if (isMobile) {
      document.addEventListener('touchstart', function() {
        retryGenerateProfileCard(3, 1000);
      });
    } else {
      window.onload = function() {
        retryGenerateProfileCard(3, 1000);
      };
    }
    anime({
            targets: ['.svg-attributes-demo polygon', 'feTurbulence', 'feDisplacementMap'],
            points: '64 128 8.574 96 8.574 32 64 0 119.426 32 119.426 96',
            baseFrequency: 0,
            scale: 1,
            loop: true,
            direction: 'alternate',
            easing: 'easeInOutExpo'
        });
    </script>
</body>
</html>
